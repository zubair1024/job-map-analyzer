{"version":3,"sources":["_components/PrivateRoute.js","_components/Map.js","_helpers/auth-header.js","_services/user.service.js","HomePage/HomePage.js","LoginPage/LoginPage.js","App/App.js","_helpers/fake-backend.js","index.js"],"names":["PrivateRoute","Component","component","rest","render","props","localStorage","getItem","to","pathname","state","from","location","Map","id","this","run","getGroupToRegions","postcodeWithRegions","setState","onLoad","addControls","Promise","resolve","reject","then","data","default","validatedData","filter","item","lat","lng","console","log","length","catch","err","type","getE5Engineers","arrayContent","markers","forEach","marker","window","L","icon","markerIcon","addTo","mapElement","bindPopup","markerPopupContent","push","Error","error","alert","circles","circle","getBoilerJobs","markerLayer","markerClusterGroup","addLayer","getServiceJobs","getLeads","addressPoints","map","p","heat","heatLayer","radius","minOpacity","content","tableContent","Object","keys","k","iconUrl","iconSize","iconAnchor","popupAnchor","removeE5Engineers","e5EngineerCircle","removeLayer","e5EngineerMarkers","e5Engineer","serviceJob","clusters","serviceJobCluster","lead","leadCluster","boilerJob","boilerJobCluster","layer","serviceJobsHeatMap","leadsHeatMap","boilerJobsHeatMap","control","custom","position","classes","style","events","click","srcElement","value","checked","renderLeads","removeLeads","renderLeadsHeatMap","removeLeadsHeatMap","renderE5Engineers","renderE5EngineerCircles","removeE5EngineerCircles","renderServiceJobs","removeServiceJobs","renderServiceJobsHeatMap","removeServiceJobsHeatMap","renderBoilerJobs","removeBoilerJobs","renderBoilerJobsHeatMap","removeBoilerJobsHeatMap","$","config","loading","loaded","areas","districts","sectors","geoJsonLayerOptions","shapeStyle","onEachFeature","feature","setStyle","fillColor","randomRange","bindLabel","properties","name","noHide","layerAreas","geoJson","layerDistricts","layerSectors","layerGoogle","tileLayer","maxZoom","subdomains","layerOSM","openStreetMap","url","attribution","zoom","max","tileMaps","RAZRMAPS","overlayMaps","Areas","Districts","Sectors","center","layers","min","Math","floor","random","collapsed","onAdd","div","DomUtil","create","innerHTML","getJSON","files","addData","features","html","statusText","authHeader","user","JSON","parse","authdata","userService","login","username","password","requestOptions","method","headers","body","stringify","fetch","handleResponse","btoa","setItem","logout","getAll","removeItem","response","text","ok","status","reload","message","HomePage","users","React","LoginPage","submitted","handleChange","bind","handleSubmit","e","target","preventDefault","returnUrl","history","className","onSubmit","onChange","placeholder","disabled","src","App","exact","path","firstName","lastName","realFetch","opts","setTimeout","endsWith","params","filteredUsers","responseJson","Authorization","configureFakeBackend","document","getElementById"],"mappings":"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","file":"static/js/main.54a44fec.chunk.js","sourcesContent":["import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={props => (\n        localStorage.getItem('user')\n            ? <Component {...props} />\n            : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n    )} />\n)","import React, { Component } from \"react\";\nimport \"./Map.css\";\n\nclass Map extends Component {\n  state = {};\n  render() {\n    return (\n      <div>\n        <div id=\"map\"></div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    this.run();\n  }\n\n  async run() {\n    let postcodeWithRegions = await this.getGroupToRegions();\n    this.setState({\n      postcodeWithRegions: postcodeWithRegions\n    });\n    this.onLoad();\n    this.addControls();\n  }\n\n  getLeads() {\n    return new Promise((resolve, reject) => {\n      import(\"../rawdata/leads.json\")\n        .then(data => {\n          if (data && data.default) {\n            const validatedData = data.default.filter(item => {\n              return item.lat && item.lng;\n            });\n            console.log(`render leads ${validatedData.length}`);\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n  getGroupToRegions() {\n    return new Promise((resolve, reject) => {\n      import(\"../rawdata/postcodeWithRegions.json\")\n        .then(data => {\n          if (data && data.default) {\n            const validatedData = data.default.filter(item => {\n              return item.lat && item.lng;\n            });\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n  getE5Engineers() {\n    return new Promise((resolve, reject) => {\n      import(\"../rawdata/e5Engineers.json\")\n        .then(data => {\n          if (data && data.default) {\n            const validatedData = data.default.filter(item => {\n              return item.lat && item.lng;\n            });\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n  getBoilerJobs() {\n    return new Promise((resolve, reject) => {\n      import(\"../rawdata/boilerJobs.json\")\n        .then(data => {\n          if (data && data.default) {\n            const validatedData = data.default.filter(item => {\n              return item.lat && item.lng;\n            });\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n  getServiceJobs() {\n    return new Promise((resolve, reject) => {\n      import(\"../rawdata/serviceJobs.json\")\n        .then(data => {\n          if (data && data.default) {\n            const validatedData = data.default.filter(item => {\n              return item.lat && item.lng;\n            });\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch(err => {\n          reject(err);\n        });\n    });\n  }\n\n  async renderE5Engineers() {\n    const type = \"e5Engineer\";\n    try {\n      const arrayContent = await this.getE5Engineers();\n      if (arrayContent && arrayContent.length) {\n        let markers = [];\n        arrayContent.forEach(item => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type)\n            }).addTo(this.mapElement);\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markers.push(marker);\n          }\n        });\n        this.setState({\n          [type]: markers\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderE5EngineerCircles() {\n    const type = \"e5Engineer\";\n    try {\n      const arrayContent = await this.getE5Engineers();\n      if (arrayContent && arrayContent.length) {\n        let circles = [];\n        arrayContent.forEach(item => {\n          if (item.lat && item.lng) {\n            let circle = window.L.circle([item.lat, item.lng], 40233.6).addTo(\n              this.mapElement\n            );\n            circles.push(circle);\n          }\n        });\n        this.setState({\n          [`${type}Circle`]: circles\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderBoilerJobs() {\n    const type = \"boilerJob\";\n    try {\n      const arrayContent = await this.getBoilerJobs();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach(item => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type)\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderServiceJobs() {\n    const type = \"serviceJob\";\n    try {\n      const arrayContent = await this.getServiceJobs();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach(item => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type)\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderLeads() {\n    const type = \"lead\";\n    try {\n      const arrayContent = await this.getLeads();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach(item => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type)\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderServiceJobsHeatMap() {\n    const type = \"serviceJob\";\n    const arrayContent = await this.getServiceJobs();\n    const addressPoints = arrayContent.map(function(p) {\n      return [p.lat, p.lng, 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderLeadsHeatMap() {\n    const type = \"lead\";\n    const arrayContent = await this.getLeads();\n    const addressPoints = arrayContent.map(function(p) {\n      return [p.lat, p.lng, 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderBoilerJobsHeatMap() {\n    const type = \"boilerJob\";\n    const arrayContent = await this.getBoilerJobs();\n    const addressPoints = arrayContent.map(function(p) {\n      return [p.lat, p.lng, 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  markerPopupContent(type, item) {\n    let content = \"\";\n    let tableContent = \"\";\n    Object.keys(item).forEach(k => {\n      tableContent =\n        tableContent +\n        `\n      <tr>\n      <td class=\"popup-table-row\">\n      <td>${k}</td>\n      <td>${item[k]}</td>\n      </td>\n        </tr>\n        `;\n    });\n    if (tableContent) {\n      content = `\n      <table class=\"table table-dark\">\n      ${tableContent}\n      </table>\n      `;\n    }\n    return content;\n  }\n\n  markerIcon(type) {\n    //   \"https://res.cloudinary.com/razrlab/image/upload/c_scale,co_rgb:D12711,e_colorize:100,f_png/v1541359481/pin_t5dc4n.png\",\n    let icon = \"\";\n    switch (type) {\n      case \"e5Engineer\":\n        icon =\n          \"https://res.cloudinary.com/razrlab/image/upload/v1571935748/person-marker_wdvvbm.png\";\n        break;\n      case \"serviceJob\":\n        icon =\n          \"https://res.cloudinary.com/razrlab/image/upload/v1571935748/service-marker_tzrx0s.png\";\n        break;\n      case \"lead\":\n      case \"boilerJob\":\n        icon =\n          \"https://res.cloudinary.com/razrlab/image/upload/v1571935748/home-marker_sskts6.png\";\n        break;\n      default:\n        //nothing\n        break;\n    }\n    const iconElement = window.L.icon({\n      iconUrl: icon,\n      iconSize: [25, 25],\n      iconAnchor: [12, 25],\n      popupAnchor: [3, -40]\n    });\n\n    return iconElement;\n  }\n\n  removeMarkers() {\n    return new Promise((resolve, reject) => {\n      this.removeE5Engineers();\n      resolve();\n    });\n  }\n\n  removeE5EngineerCircles() {\n    let circles = this.state.e5EngineerCircle;\n    if (circles && circles.length) {\n      circles.forEach(item => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n\n  removeE5Engineers() {\n    let e5EngineerMarkers = this.state.e5Engineer;\n    if (e5EngineerMarkers && e5EngineerMarkers.length) {\n      e5EngineerMarkers.forEach(item => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n\n  removeServiceJobs() {\n    let markers = this.state.serviceJob;\n    let clusters = this.state.serviceJobCluster;\n    if (markers && markers.length) {\n      markers.forEach(item => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeLeads() {\n    let markers = this.state.lead;\n    let clusters = this.state.leadCluster;\n    if (markers && markers.length) {\n      markers.forEach(item => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeBoilerJobs() {\n    let markers = this.state.boilerJob;\n    let clusters = this.state.boilerJobCluster;\n    if (markers && markers.length) {\n      markers.forEach(item => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeServiceJobsHeatMap() {\n    const layer = this.state.serviceJobsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n\n  removeLeadsHeatMap() {\n    const layer = this.state.leadsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n\n  removeBoilerJobsHeatMap() {\n    const layer = this.state.boilerJobsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n  addControls() {\n    const L = window.L;\n    L.control\n      .custom({\n        position: \"bottomleft\",\n        content: `\n        <div class=\"panel-body\">\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"e5Engineers\">E5 Engineers</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"e5EngineerCircles\">E5 Engineers Boundaries</label>\n          </div>\n          <div class=\"checkbox\">\n          <label><input type=\"checkbox\" value=\"leadsHeatMap\">Leads Heat Map</label>\n          </div>\n          <div class=\"checkbox\">\n          <label><input type=\"checkbox\" value=\"serviceJobsHeatMap\">Service Jobs Heat Map</label>\n          </div>\n          <div class=\"checkbox\">\n          <label><input type=\"checkbox\" value=\"boilerJobsHeatMap\">Boiler Jobs Heat Map</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"leads\">Leads</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"serviceJobs\">Service Jobs</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"boilerJobs\">Boiler Jobs</label>\n          </div>\n        </div>\n        `,\n        classes: \"panel panel-default\",\n        style: {},\n        events: {\n          click: data => {\n            if (data && data.srcElement && data.srcElement.type) {\n              switch (data.srcElement.value) {\n                case \"leads\":\n                  data.srcElement.checked\n                    ? this.renderLeads()\n                    : this.removeLeads();\n                  break;\n                case \"leadsHeatMap\":\n                  data.srcElement.checked\n                    ? this.renderLeadsHeatMap()\n                    : this.removeLeadsHeatMap();\n                  break;\n                case \"e5Engineers\":\n                  data.srcElement.checked\n                    ? this.renderE5Engineers()\n                    : this.removeE5Engineers();\n                  break;\n                case \"e5EngineerCircles\":\n                  data.srcElement.checked\n                    ? this.renderE5EngineerCircles()\n                    : this.removeE5EngineerCircles();\n                  break;\n                case \"serviceJobs\":\n                  data.srcElement.checked\n                    ? this.renderServiceJobs()\n                    : this.removeServiceJobs();\n                  break;\n                case \"serviceJobsHeatMap\":\n                  data.srcElement.checked\n                    ? this.renderServiceJobsHeatMap()\n                    : this.removeServiceJobsHeatMap();\n                  break;\n                case \"boilerJobs\":\n                  data.srcElement.checked\n                    ? this.renderBoilerJobs()\n                    : this.removeBoilerJobs();\n                  break;\n                case \"boilerJobsHeatMap\":\n                  data.srcElement.checked\n                    ? this.renderBoilerJobsHeatMap()\n                    : this.removeBoilerJobsHeatMap();\n                  break;\n                default:\n                  break;\n              }\n            }\n          }\n        }\n      })\n      .addTo(this.mapElement);\n  }\n\n  onLoad() {\n    const L = window.L;\n    const $ = window.$;\n    const config = window.config;\n    const loading = L.control({ position: \"bottomright\" }),\n      loaded = {\n        areas: false,\n        districts: false,\n        sectors: false\n      },\n      geoJsonLayerOptions = {\n        style: config.shapeStyle,\n        onEachFeature: onEachFeature\n      },\n      layerAreas = L.geoJson(null, geoJsonLayerOptions),\n      layerDistricts = L.geoJson(null, geoJsonLayerOptions),\n      layerSectors = L.geoJson(null, geoJsonLayerOptions),\n      layerGoogle = L.tileLayer(\n        \"http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}?key=AIzaSyC0AJcO-U5RksjP02AQHxEuFlEW5xSKzp8\",\n        {\n          maxZoom: 20,\n          subdomains: [\"mt0\", \"mt1\", \"mt2\", \"mt3\"]\n        }\n      ),\n      layerOSM = L.tileLayer(config.openStreetMap.url, {\n        // OpenStreetMap tile layer (default)\n        attribution: config.openStreetMap.attribution,\n        maxZoom: config.zoom.max\n      }),\n      tileMaps = {\n        // Tile map layer switcher\n        \"Google Maps\": layerGoogle,\n        RAZRMAPS: layerOSM\n      },\n      overlayMaps = {\n        // GeoJSON layer switcher\n        Areas: layerAreas,\n        Districts: layerDistricts,\n        Sectors: layerSectors\n      },\n      map = L.map(\"map\", {\n        // Setup map object\n        center: [53.21919, -1.86768],\n        zoom: 7,\n        layers: [layerOSM]\n      });\n\n    this.mapElement = map;\n\n    // Add layers control\n    L.control.layers(tileMaps, overlayMaps, { collapsed: false }).addTo(map);\n\n    // For each feature, set random fill colour and bind 'name' label\n    function onEachFeature(feature, layer) {\n      layer.setStyle({ fillColor: randomColor() });\n      layer.bindLabel(feature.properties.name, { noHide: true });\n    }\n\n    function randomRange(min, max) {\n      return Math.floor(Math.random() * (max - min)) + min;\n    }\n\n    function randomColor() {\n      return (\n        \"rgb(\" +\n        randomRange(0, 256) +\n        \",\" +\n        randomRange(0, 256) +\n        \",\" +\n        randomRange(0, 256) +\n        \")\"\n      );\n    }\n\n    // Setup GeoJSON loading indicator and add to map\n    loading.onAdd = function() {\n      const div = L.DomUtil.create(\"div\", \"control loader\");\n\n      div.innerHTML = `\n            <div>\\\n                Areas... <span id=\"loadAreas\">&#x21BB;</span><br>\n                Districts... <span id=\"loadDistricts\">&#x21BB;</span><br>\n                Sectors... <span id=\"loadSectors\">&#x21BB;</span>\n            </div>\n            `;\n\n      return div;\n    };\n    loading.addTo(map);\n\n    // Automatically set the GeoJSON layer depending on zoom level\n    // map.on(\"zoomend\", function() {\n    //   if (!(loaded.areas && loaded.districts && loaded.sectors)) {\n    //     return;\n    //   }\n\n    //   const zoom = map.getZoom();\n\n    //   if (\n    //     zoom >= config.zoom.areas &&\n    //     zoom < config.zoom.districts &&\n    //     !map.hasLayer(layerAreas)\n    //   ) {\n    //     map.removeLayer(layerDistricts);\n    //     map.removeLayer(layerSectors);\n    //     map.addLayer(layerAreas);\n    //   } else if (\n    //     zoom >= config.zoom.districts &&\n    //     zoom < config.zoom.sectors &&\n    //     !map.hasLayer(layerDistricts)\n    //   ) {\n    //     map.removeLayer(layerAreas);\n    //     map.removeLayer(layerSectors);\n    //     map.addLayer(layerDistricts);\n    //   } else if (zoom >= config.zoom.sectors && !map.hasLayer(layerSectors)) {\n    //     map.removeLayer(layerAreas);\n    //     map.removeLayer(layerDistricts);\n    //     map.addLayer(layerSectors);\n    //   }\n    // });\n\n    // Load postcode Areas GeoJSON file\n    $.getJSON(config.files.areas, function(data) {\n      // Add loaded GeoJSON data to layer\n      layerAreas.addData(data.features);\n\n      // Show Areas layer by default\n      map.addLayer(layerAreas);\n\n      loaded.areas = true;\n      $(\"#loadAreas\").html(\"&#x2713;\");\n    }).error(function(error) {\n      console.error(\n        \"Failed loading '\" + config.files.areas + \"'\",\n        \"Error: \" + error.statusText\n      );\n\n      $(\"#loadAreas\").html(\"&#x2717;\");\n    });\n\n    // Load postcode Districts GeoJSON file\n    $.getJSON(config.files.districts, function(data) {\n      // Add loaded GeoJSON data to layer\n      layerDistricts.addData(data.features);\n\n      loaded.districts = true;\n      $(\"#loadDistricts\").html(\"&#x2713;\");\n    }).error(function(error) {\n      console.error(\n        \"Failed loading '\" + config.files.districts + \"'\",\n        \"Error: \" + error.statusText\n      );\n\n      $(\"#loadDistricts\").html(\"&#x2717;\");\n    });\n\n    // Load postcode Sectors GeoJSON file\n    $.getJSON(config.files.sectors, function(data) {\n      // Add loaded GeoJSON data to layer\n      layerSectors.addData(data.features);\n\n      loaded.sectors = true;\n      $(\"#loadSectors\").html(\"&#x2713;\");\n    }).error(function(error) {\n      console.error(\n        \"Failed loading '\" + config.files.sectors + \"'\",\n        \"Error: \" + error.statusText\n      );\n\n      $(\"#loadSectors\").html(\"&#x2717;\");\n    });\n  }\n}\n\nexport { Map };\n","export function authHeader() {\n    // return authorization header with basic auth credentials\n    let user = JSON.parse(localStorage.getItem('user'));\n\n    if (user && user.authdata) {\n        return { 'Authorization': 'Basic ' + user.authdata };\n    } else {\n        return {};\n    }\n}","import { authHeader } from '../_helpers';\n\nexport const userService = {\n    login,\n    logout,\n    getAll\n};\n\nfunction login(username, password) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password })\n    };\n\n    return fetch(`/users/authenticate`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            // login successful if there's a user in the response\n            if (user) {\n                // store user details and basic auth credentials in local storage \n                // to keep user logged in between page refreshes\n                user.authdata = window.btoa(username + ':' + password);\n                localStorage.setItem('user', JSON.stringify(user));\n            }\n\n            return user;\n        });\n}\n\nfunction logout() {\n    // remove user from local storage to log user out\n    localStorage.removeItem('user');\n}\n\nfunction getAll() {\n    const requestOptions = {\n        method: 'GET',\n        headers: authHeader()\n    };\n\n    return fetch(`/users`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                // auto logout if 401 response returned from api\n                logout();\n                window.location.reload(true);\n            }\n\n            const error = (data && data.message) || response.statusText;\n            return Promise.reject(error);\n        }\n\n        return data;\n    });\n}","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { userService } from \"../_services\";\n\nimport { Map } from \"../_components\";\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: {},\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      user: JSON.parse(localStorage.getItem(\"user\")),\n      users: { loading: true }\n    });\n    userService.getAll().then(users => this.setState({ users }));\n  }\n\n  render() {\n    const { user, users } = this.state;\n    return <Map />;\n  }\n}\n\nexport { HomePage };\n","import React from \"react\";\n\nimport { userService } from \"../_services\";\n\nimport \"./LoginPage.css\";\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    userService.logout();\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      submitted: false,\n      loading: false,\n      error: \"\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    this.setState({ submitted: true });\n    const { username, password, returnUrl } = this.state;\n\n    // stop here if form is invalid\n    if (!(username && password)) {\n      return;\n    }\n\n    this.setState({ loading: true });\n    userService.login(username, password).then(\n      user => {\n        const { from } = this.props.location.state || {\n          from: { pathname: \"/\" }\n        };\n        this.props.history.push(from);\n      },\n      error => this.setState({ error, loading: false })\n    );\n  }\n\n  render() {\n    const { username, password, submitted, loading, error } = this.state;\n\n    // return (\n    //   <div className=\"login-page\">\n    //     <div className=\"form\">\n    //       <form className=\"register-form\" onSubmit={this.handleSubmit}>\n    //         <input\n    //           type=\"text\"\n    //           className=\"form-control\"\n    //           name=\"username\"\n    //           value={username}\n    //           onChange={this.handleChange}\n    //         />\n    //         <input\n    //           type=\"password\"\n    //           className=\"form-control\"\n    //           name=\"password\"\n    //           value={password}\n    //           onChange={this.handleChange}\n    //         />\n    //       </form>\n    //       <form className=\"login-form\">\n    //         <input type=\"text\" placeholder=\"username\" />\n    //         <input type=\"password\" placeholder=\"password\" />\n    //         <div className=\"form-group\">\n    //           <button className=\"btn btn-primary\" disabled={loading}>\n    //             Login\n    //           </button>\n    //           {loading && (\n    //             <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n    //           )}\n    //         </div>\n    //         {error && <div className={\"alert alert-danger\"}>{error}</div>}\n    //         <p className=\"message\">\n    //           This is a private page. If you're not supposed to be here, walk\n    //           away now!\n    //         </p>\n    //       </form>\n    //     </div>\n    //   </div>\n    // );\n\n    return (\n      <div className=\"login-page\">\n        <div className=\"form\">\n          <h2>Map Analyzer</h2>\n          <form name=\"form\" onSubmit={this.handleSubmit}>\n            <div\n              className={\n                \"form-group\" + (submitted && !username ? \" has-error\" : \"\")\n              }\n            >\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                name=\"username\"\n                value={username}\n                onChange={this.handleChange}\n                placeholder=\"Username\"\n              />\n              {submitted && !username && (\n                <div className=\"help-block\">Username is required</div>\n              )}\n            </div>\n            <div\n              className={\n                \"form-group\" + (submitted && !password ? \" has-error\" : \"\")\n              }\n            >\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                onChange={this.handleChange}\n                placeholder=\"Password\"\n              />\n              {submitted && !password && (\n                <div className=\"help-block\">Password is required</div>\n              )}\n            </div>\n            <div className=\"form-group\">\n              <button className=\"btn btn-primary\" disabled={loading}>\n                Login\n              </button>\n              {loading && (\n                <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n              )}\n            </div>\n            {error && <div className={\"alert alert-danger\"}>{error}</div>}\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport { LoginPage };\n","import React from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport { PrivateRoute } from \"../_components\";\nimport { HomePage } from \"../HomePage\";\nimport { LoginPage } from \"../LoginPage\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      // <div className=\"jumbotron\">\n      //     <div className=\"container\">\n      //         <div className=\"col-sm-8 col-sm-offset-2\">\n      <Router>\n        <div>\n          <PrivateRoute exact path=\"/\" component={HomePage} />\n          <Route path=\"/login\" component={LoginPage} />\n        </div>\n      </Router>\n      //         </div>\n      //     </div>\n      // </div>\n    );\n  }\n}\n\nexport { App };\n","export function configureFakeBackend() {\n    let users = [{ id: 1, username: 'vp', password: 'vptester', firstName: 'Test', lastName: 'User' }];\n    let realFetch = window.fetch;\n    window.fetch = function (url, opts) {\n        return new Promise((resolve, reject) => {\n            // wrap in timeout to simulate server api call\n            setTimeout(() => {\n\n                // authenticate\n                if (url.endsWith('/users/authenticate') && opts.method === 'POST') {\n                    // get parameters from post request\n                    let params = JSON.parse(opts.body);\n\n                    // find if any user matches login credentials\n                    let filteredUsers = users.filter(user => {\n                        return user.username === params.username && user.password === params.password;\n                    });\n\n                    if (filteredUsers.length) {\n                        // if login details are valid return user details\n                        let user = filteredUsers[0];\n                        let responseJson = {\n                            id: user.id,\n                            username: user.username,\n                            firstName: user.firstName,\n                            lastName: user.lastName\n                        };\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\n                    } else {\n                        // else return error\n                        reject('Username or password is incorrect');\n                    }\n\n                    return;\n                }\n\n                // get users\n                if (url.endsWith('/users') && opts.method === 'GET') {\n                    // check for fake auth token in header and return users if valid, this security \n                    // is implemented server side in a real application\n                    if (opts.headers && opts.headers.Authorization === `Basic ${window.btoa('vp:vptester')}`) {\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(users)) });\n                    } else {\n                        // return 401 not authorised if token is null or invalid\n                        resolve({ status: 401, text: () => Promise.resolve() });\n                    }\n\n                    return;\n                }\n\n                // pass through any requests not handled above\n                realFetch(url, opts).then(response => resolve(response));\n\n            }, 500);\n        });\n    }\n}","import React from \"react\";\nimport { render } from \"react-dom\";\n\nimport { App } from \"./App\";\n\n// setup fake backend\nimport { configureFakeBackend } from \"./_helpers\";\nconfigureFakeBackend();\nrender(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}