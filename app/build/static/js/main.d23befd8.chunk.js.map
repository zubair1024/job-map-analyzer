{"version":3,"sources":["_components/PrivateRoute.js","utils.js","_components/TableComponent.js","_helpers/auth-header.js","_services/user.service.js","_services/associate.service.js","_components/Map.js","HomePage/HomePage.js","LoginPage/LoginPage.js","App/App.js","_helpers/fake-backend.js","index.js"],"names":["PrivateRoute","Component","component","rest","render","props","localStorage","getItem","to","pathname","state","from","location","dayjs","extend","utc","timezone","customParseFormat","isNumber","value","isNaN","parseFloat","isFinite","dayjsUtil","TableComponent","loadingDownloadLink","downloadLink","downloadLeadNumber","downloadData","dataRows","this","data","rows","tableHeaders","tableBody","map","row","idx","key","type","_id","onChange","handleShow","bind","name","className","onClick","handleEdit","handleDelete","handleDownload","style","float","filename","target","loadingComponent","width","e","a","setState","find","item","toString","layer","polygonCoords","getLatLngs","lat","lng","getLeads","leads","length","alert","Promise","resolve","reject","then","default","validatedData","filter","classification","classifyPoint","catch","err","authHeader","user","JSON","parse","authdata","userService","login","username","password","requestOptions","method","headers","body","stringify","fetch","handleResponse","window","btoa","setItem","logout","getAll","removeItem","response","text","ok","status","reload","error","message","statusText","associateService","getAllAssociates","console","log","process","url","URL","searchParams","append","res","json","Map","newPolygon","editPolygonDetails","tableData","columns","currentPolygonsInView","currentPolygonLabels","hideAssociateLabels","id","editPolygon","createNewPolygon","marginTop","for","aria-describedby","placeholder","submitNewPolygon","cancelNewPolygon","submitEditedPolygon","cancelEditedPolygon","run","isSelected","checked","selectedData","renderSelectedPolygon","removeAllPolygonsFromMap","enablePolygonEditControl","editableLayers","addLayer","confirm","deleteGroup","polygon","addPolygonAndLabelToMap","removePolygonAndLabelFromMap","_parentId","addTo","mapElement","label","L","Label","setContent","setLatLng","getBounds","getCenter","bindLabel","showLabel","prevState","removeLayer","forEach","saveGroup","addNewPolygon","resetForm","disablePolygonEditControl","Error","updateGroup","addEditedPolygon","GeoJSON","geometryToLayer","geoJSON","Object","assign","onLoad","addControls","getGroups","groups","populateGroups","axios","get","polygonDetails","toGeoJSON","geometry","group","post","put","delete","sanitizedData","StatusDate","sort","b","Date","FirstTimePolicyLiveDate","CreatedDate","format","sortedData","AppointmentDate","tz","diff","getE5Engineers","arrayContent","markers","marker","icon","markerIcon","bindPopup","markerPopupContent","push","circles","circle","getBoilerJobs","markerLayer","markerClusterGroup","getServiceJobs","removeAssociates","getAssociates","latitude","longitude","engineStatus","rotationAngle","heading","noHide","addressPoints","p","heat","heatLayer","radius","minOpacity","content","tableContent","keys","k","size","iconUrl","iconSize","iconAnchor","popupAnchor","removeE5Engineers","e5EngineerCircle","associateMarkers","associate","e5EngineerMarkers","e5Engineer","serviceJob","clusters","serviceJobCluster","lead","leadCluster","boilerJob","boilerJobCluster","serviceJobsHeatMap","leadsHeatMap","boilerJobsHeatMap","control","custom","position","classes","events","click","srcElement","renderLeads","removeLeads","renderLeadsHeatMap","removeLeadsHeatMap","renderE5Engineers","renderE5EngineerCircles","removeE5EngineerCircles","renderServiceJobs","removeServiceJobs","renderServiceJobsHeatMap","removeServiceJobsHeatMap","renderBoilerJobs","removeBoilerJobs","renderBoilerJobsHeatMap","removeBoilerJobsHeatMap","showSideBar","hideSideBar","renderAssociates","FeatureGroup","drawPluginOptions","draw","allowIntersection","drawError","color","shapeOptions","polyline","rectangle","edit","featureGroup","remove","drawControl","Control","Draw","on","layers","eachLayer","addControl","removeControl","$","config","loading","loaded","areas","districts","sectors","geoJsonLayerOptions","shapeStyle","onEachFeature","feature","setStyle","fillColor","randomRange","properties","layerAreas","geoJson","layerDistricts","layerSectors","layerGoogle","tileLayer","maxZoom","subdomains","layerOSM","openStreetMap","attribution","zoom","max","tileMaps","RAZRMAPS","overlayMaps","Areas","Districts","Sectors","center","sidebar","closeButton","min","Math","floor","random","sidebarElement","collapsed","initEditableLayer","initDrawControls","onAdd","div","DomUtil","create","innerHTML","getJSON","files","addData","features","html","associateRefresher","setInterval","show","hide","HomePage","users","React","LoginPage","submitted","handleChange","handleSubmit","preventDefault","returnUrl","history","onSubmit","disabled","src","App","exact","path","firstName","lastName","realFetch","opts","setTimeout","endsWith","params","filteredUsers","responseJson","Authorization","configureFakeBackend","document","getElementById"],"mappings":"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","file":"static/js/main.d23befd8.chunk.js","sourcesContent":["import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nexport const PrivateRoute = ({ component: Component, ...rest }) => (\n    <Route {...rest} render={props => (\n        localStorage.getItem('user')\n            ? <Component {...props} />\n            : <Redirect to={{ pathname: '/login', state: { from: props.location } }} />\n    )} />\n)","import dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport timezone from 'dayjs/plugin/timezone';\nimport customParseFormat from 'dayjs/plugin/customParseFormat';\n\ndayjs.extend(utc);\ndayjs.extend(timezone);\ndayjs.extend(customParseFormat);\n\nexport const isNumber = (value) => {\n  return !isNaN(parseFloat(value)) && isFinite(value);\n};\n\nexport const dayjsUtil = dayjs;\n","import React, { Component } from \"react\";\r\n\r\nimport { CSVLink } from \"react-csv\";\r\n\r\nimport classifyPoint from \"robust-point-in-polygon\";\r\n\r\nclass TableComponent extends Component {\r\n  state = {\r\n    loadingDownloadLink: false,\r\n    downloadLink: false,\r\n    downloadLeadNumber: null,\r\n    downloadData: []\r\n  };\r\n  render() {\r\n    const dataRows = this.props.data.rows;\r\n\r\n    const tableHeaders = (\r\n      <thead>\r\n        <tr>\r\n          <th>Show</th>\r\n          <th>Name</th>\r\n          <th>Edit</th>\r\n          <th>Delete</th>\r\n          <th>Download Leads</th>\r\n        </tr>\r\n      </thead>\r\n    );\r\n\r\n    const tableBody = dataRows.map((row, idx) => {\r\n      return (\r\n        <tr key={idx}>\r\n          <td key={`show${idx}`}>\r\n            <input\r\n              type=\"checkbox\"\r\n              value={row._id}\r\n              onChange={this.handleShow.bind(this)}\r\n            />\r\n          </td>\r\n          <td key={`column${{ idx }}`}>{row.name}</td>\r\n          <td key={`edit${idx}`}>\r\n            <button\r\n              className=\"btn btn-dark\"\r\n              value={row._id}\r\n              onClick={this.handleEdit.bind(this)}\r\n            >\r\n              Edit\r\n            </button>\r\n          </td>\r\n          <td key={`delete${idx}`}>\r\n            <button\r\n              className=\"btn btn-dark\"\r\n              value={row._id}\r\n              onClick={this.handleDelete.bind(this)}\r\n            >\r\n              Delete\r\n            </button>\r\n          </td>\r\n          <td key={`download${idx}`}>\r\n            <button\r\n              className=\"btn btn-dark\"\r\n              value={row._id}\r\n              onClick={this.handleDownload.bind(this)}\r\n            >\r\n              Download\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      );\r\n    });\r\n\r\n    const downloadLink = this.state.downloadLink && (\r\n      <div style={{ float: \"right\" }}>\r\n        <CSVLink\r\n          data={this.state.downloadData}\r\n          filename={\"my-file.csv\"}\r\n          className=\"btn btn-dark\"\r\n          target=\"_blank\"\r\n        >\r\n          Download {this.state.downloadLeadNumber} Leads\r\n        </CSVLink>\r\n      </div>\r\n    );\r\n\r\n    const loadingComponent = this.state.loadingDownloadLink && (\r\n      <div>\r\n        <h3>Loading...</h3>\r\n      </div>\r\n    );\r\n\r\n    // Decorate with Bootstrap CSS\r\n    return (\r\n      <div>\r\n        <table className=\"table table-bordered table-hover\" width=\"100%\">\r\n          {tableHeaders}\r\n          <tbody>{tableBody}</tbody>\r\n        </table>\r\n        {downloadLink}\r\n        {loadingComponent}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  handleShow(e) {\r\n    this.props.handleShow(e);\r\n  }\r\n  handleEdit(e) {\r\n    this.props.handleEdit(e);\r\n  }\r\n  handleDelete(e) {\r\n    this.props.handleDelete(e);\r\n  }\r\n  async handleDownload(e) {\r\n    try {\r\n      this.setState({\r\n        loadingDownloadLink: true,\r\n        downloadLink: false\r\n      });\r\n      const data = this.props.data.rows.find(item => {\r\n        return item._id.toString() === e.target.value.toString();\r\n      });\r\n      if (data && data.layer) {\r\n        const polygonCoords = data.layer.getLatLngs().map(item => {\r\n          return [item.lat, item.lng];\r\n        });\r\n        const leads = await this.getLeads(polygonCoords);\r\n        if (leads.length) {\r\n          this.setState({\r\n            downloadLeadNumber: leads.length,\r\n            loadingDownloadLink: false,\r\n            downloadData: leads,\r\n            downloadLink: true\r\n          });\r\n        } else {\r\n          this.setState({\r\n            downloadLeadNumber: null,\r\n            loadingDownloadLink: false,\r\n            downloadData: [],\r\n            downloadLink: false\r\n          });\r\n          alert(`There are no leads in the selected cluster!`);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      alert(err);\r\n      this.setState({\r\n        downloadLeadNumber: null,\r\n        loadingDownloadLink: false,\r\n        downloadData: [],\r\n        downloadLink: false\r\n      });\r\n    }\r\n  }\r\n\r\n  getLeads(polygonCoords) {\r\n    return new Promise((resolve, reject) => {\r\n      import(\"../rawdata/leads.json\")\r\n        .then(data => {\r\n          if (data && data.default) {\r\n            const validatedData = data.default.filter(item => {\r\n              if (item.lat && item.lng) {\r\n                const classification = classifyPoint(polygonCoords, [\r\n                  item.lat,\r\n                  item.lng\r\n                ]);\r\n                return classification === -1 || classification === 0;\r\n              } else {\r\n                return false;\r\n              }\r\n            });\r\n            resolve(validatedData);\r\n          } else {\r\n            resolve([]);\r\n          }\r\n        })\r\n        .catch(err => {\r\n          reject(err);\r\n        });\r\n    });\r\n  }\r\n}\r\n\r\nexport default TableComponent;\r\n","export function authHeader() {\n    // return authorization header with basic auth credentials\n    let user = JSON.parse(localStorage.getItem('user'));\n\n    if (user && user.authdata) {\n        return { 'Authorization': 'Basic ' + user.authdata };\n    } else {\n        return {};\n    }\n}","import { authHeader } from '../_helpers';\n\nexport const userService = {\n    login,\n    logout,\n    getAll\n};\n\nfunction login(username, password) {\n    const requestOptions = {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ username, password })\n    };\n\n    return fetch(`/users/authenticate`, requestOptions)\n        .then(handleResponse)\n        .then(user => {\n            // login successful if there's a user in the response\n            if (user) {\n                // store user details and basic auth credentials in local storage \n                // to keep user logged in between page refreshes\n                user.authdata = window.btoa(username + ':' + password);\n                localStorage.setItem('user', JSON.stringify(user));\n            }\n\n            return user;\n        });\n}\n\nfunction logout() {\n    // remove user from local storage to log user out\n    localStorage.removeItem('user');\n}\n\nfunction getAll() {\n    const requestOptions = {\n        method: 'GET',\n        headers: authHeader()\n    };\n\n    return fetch(`/users`, requestOptions).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n    return response.text().then(text => {\n        const data = text && JSON.parse(text);\n        if (!response.ok) {\n            if (response.status === 401) {\n                // auto logout if 401 response returned from api\n                logout();\n                window.location.reload(true);\n            }\n\n            const error = (data && data.message) || response.statusText;\n            return Promise.reject(error);\n        }\n\n        return data;\n    });\n}","export const associateService = {\n  getAllAssociates,\n};\n\n/**\n * @returns {Promise<any>}\n */\nfunction getAllAssociates() {\n  const requestOptions = {\n    method: 'GET',\n    headers: { 'Content-Type': 'application/json' },\n  };\n\n  const API_URL = process.env.REACT_APP_API_URL;\n\n  console.log(process.env);\n\n  const url = new URL(`${API_URL}/external/associate/`);\n  url.searchParams.append('apikey', process.env.REACT_APP_API_KEY);\n  url.searchParams.append(\n    'projection',\n    'name,imei,latitude,longitude,engineStatus,heading'\n  );\n\n  return fetch(\n    `${url.toString()}&&$filter=(pState eq 1 and assetAssociateStatus eq 'commissioned')`,\n    requestOptions\n  )\n    .then((res) => res.json())\n    .then((res) => {\n      return res?.data;\n    });\n}\n","import React, { Component } from 'react';\nimport axios from 'axios';\nimport { dayjsUtil } from '../utils';\nimport './Map.css';\n\nimport TableComponent from './TableComponent';\nimport { isNumber } from '../utils';\nimport { associateService } from '../_services';\n\n// const url = `http://localhost:4000/api/group`;\nconst url = `https://map247.razrlab.com/api/group`;\n\nclass Map extends Component {\n  associateRefresher;\n\n  state = {\n    newPolygon: false,\n    editPolygonDetails: {\n      name: '',\n      layer: null,\n    },\n    tableData: {\n      columns: ['name'],\n      rows: [],\n    },\n    currentPolygonsInView: [],\n    currentPolygonLabels: [],\n    hideAssociateLabels: true,\n  };\n\n  render() {\n    return (\n      <div>\n        <div id='map'></div>\n        <div id='sidebar'>\n          {!this.state.newPolygon && !this.state.editPolygon && (\n            <div>\n              <h3>Groups</h3>\n              <TableComponent\n                data={this.state.tableData}\n                handleShow={this.handleShow.bind(this)}\n                handleEdit={this.handleEdit.bind(this)}\n                handleDelete={this.handleDelete.bind(this)}\n              />\n              <button\n                className='btn btn-primary'\n                onClick={() => {\n                  this.createNewPolygon();\n                }}\n              >\n                Create New\n              </button>\n            </div>\n          )}\n\n          {this.state.newPolygon && (\n            <div>\n              <div className='row' style={{ marginTop: '5vh' }}>\n                <div className='form-group'>\n                  <label for='exampleInputEmail1'>Group Name</label>\n                  <input\n                    type='text'\n                    className='form-control'\n                    id='exampleInputEmail1'\n                    aria-describedby='emailHelp'\n                    placeholder='Enter Name'\n                    value={this.state.editPolygonDetails.name}\n                    onChange={(e) => {\n                      this.setState({\n                        editPolygonDetails: {\n                          ...this.state.editPolygonDetails,\n                          name: e.target.value,\n                        },\n                      });\n                    }}\n                  ></input>\n                  <small id='emailHelp' className='form-text text-muted'>\n                    Please enter a unqiue group name.\n                  </small>\n                </div>\n                <button\n                  className='btn btn-dark'\n                  onClick={() => {\n                    this.submitNewPolygon();\n                  }}\n                >\n                  Save\n                </button>{' '}\n                <button\n                  className='btn btn-danger'\n                  onClick={() => {\n                    this.cancelNewPolygon();\n                  }}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n\n          {this.state.editPolygon && (\n            <div>\n              <div className='row' style={{ marginTop: '5vh' }}>\n                <div className='form-group'>\n                  <label for='exampleInputEmail1'>Group Name</label>\n                  <input\n                    type='text'\n                    className='form-control'\n                    id='exampleInputEmail1'\n                    aria-describedby='emailHelp'\n                    placeholder='Enter Name'\n                    value={this.state.editPolygonDetails.name}\n                    onChange={(e) => {\n                      this.setState({\n                        editPolygonDetails: {\n                          ...this.state.editPolygonDetails,\n                          name: e.target.value,\n                        },\n                      });\n                    }}\n                  ></input>\n                  <small id='emailHelp' className='form-text text-muted'>\n                    Please enter a unqiue group name.\n                  </small>\n                </div>\n                <button\n                  className='btn btn-dark'\n                  onClick={() => {\n                    this.submitEditedPolygon();\n                  }}\n                >\n                  Save\n                </button>{' '}\n                <button\n                  className='btn btn-danger'\n                  onClick={() => {\n                    this.cancelEditedPolygon();\n                  }}\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    console.log('componentDidMount');\n    this.run();\n  }\n\n  handleShow(e) {\n    const _id = e.target.value;\n    const isSelected = e.target.checked;\n    const selectedData = this.state.tableData.rows.find((item) => {\n      return _id.toString() === item._id.toString();\n    });\n    if (selectedData && selectedData.layer)\n      this.renderSelectedPolygon(selectedData, isSelected);\n  }\n\n  async handleEdit(e) {\n    // debugger;\n    const _id = e.target.value;\n    const isSelected = true;\n    const selectedData = this.state.tableData.rows.find((item) => {\n      return _id.toString() === item._id.toString();\n    });\n    if (selectedData && selectedData.layer) {\n      await this.removeAllPolygonsFromMap();\n      await this.renderSelectedPolygon(selectedData, isSelected);\n      //enable controls and add poly to editable layer\n      this.enablePolygonEditControl();\n      this.editableLayers.addLayer(selectedData.layer);\n      this.setState({\n        editPolygon: true,\n        editPolygonDetails: {\n          _id: _id,\n          name: selectedData.name,\n          layer: selectedData.layer,\n        },\n      });\n    }\n  }\n\n  async handleDelete(e) {\n    const _id = e.target.value;\n    const confirmed = window.confirm(`Are you sure you want to delete?`);\n    if (confirmed) {\n      try {\n        //deselect the layer\n        const isSelected = false;\n\n        const selectedData = this.state.tableData.rows.find((item) => {\n          return _id.toString() === item._id.toString();\n        });\n        if (selectedData && selectedData.layer) {\n          this.renderSelectedPolygon(selectedData, isSelected);\n        }\n\n        const deletedGroup = await this.deleteGroup(selectedData);\n\n        if (deletedGroup) {\n          const rows = this.state.tableData.rows.filter((item) => {\n            return item._id && _id && item._id.toString() !== _id.toString();\n          });\n          this.setState({\n            tableData: {\n              ...this.state.tableData,\n              rows: rows,\n            },\n          });\n        }\n      } catch (err) {\n        console.error(err);\n        alert('An error occurred while deleting...');\n      }\n    }\n  }\n\n  async renderSelectedPolygon(data, isSelected) {\n    if (data.layer) {\n      const polygon = data.layer;\n      if (isSelected) {\n        await this.addPolygonAndLabelToMap(data, polygon);\n      } else {\n        await this.removePolygonAndLabelFromMap(data, polygon);\n      }\n    }\n  }\n\n  addPolygonAndLabelToMap(data, polygon) {\n    return new Promise((resolve) => {\n      //add to map\n      polygon._parentId = data._id;\n      polygon.addTo(this.mapElement);\n      //add label to map\n      const label = new window.L.Label();\n      label.setContent(data.name);\n      label.setLatLng(polygon.getBounds().getCenter());\n      label._parentId = data._id;\n      polygon.bindLabel(label);\n      this.mapElement.showLabel(label);\n      //save state\n      this.setState((prevState) => ({\n        currentPolygonsInView: [...prevState.currentPolygonsInView, polygon],\n        currentPolygonLabels: [...prevState.currentPolygonLabels, label],\n      }));\n      resolve();\n    });\n  }\n\n  removePolygonAndLabelFromMap(data, polygon) {\n    return new Promise((resolve) => {\n      const label = this.state.currentPolygonLabels.find((item) => {\n        return (\n          item._parentId &&\n          data._id &&\n          item._parentId.toString() === data._id.toString()\n        );\n      });\n\n      //remove them from the map\n      if (label) this.mapElement.removeLayer(label);\n      if (polygon) this.mapElement.removeLayer(polygon);\n\n      const currentPolygonsInView = this.state.currentPolygonsInView.filter(\n        (item) =>\n          item._parentId &&\n          label._parentId &&\n          item._parentId.toString() !== label._parentId.toString()\n      );\n      const currentPolygonLabels = this.state.currentPolygonLabels.filter(\n        (item) =>\n          item._parentId &&\n          label._parentId &&\n          item._parentId.toString() !== label._parentId.toString()\n      );\n\n      //save state\n      this.setState({\n        currentPolygonsInView: currentPolygonsInView,\n        currentPolygonLabels: currentPolygonLabels,\n      });\n      resolve();\n    });\n  }\n\n  removeAllPolygonsFromMap() {\n    return new Promise((resolve, reject) => {\n      const polygonLayers = this.state.currentPolygonsInView;\n      polygonLayers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n      const polygonLabels = this.state.currentPolygonLabels;\n      polygonLabels.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n\n      //save new state\n      this.setState({\n        currentPolygonsInView: [],\n        currentPolygonLabels: [],\n      });\n      resolve();\n    });\n  }\n\n  async createNewPolygon() {\n    await this.removeAllPolygonsFromMap();\n    this.setState({\n      newPolygon: true,\n    });\n    this.enablePolygonEditControl();\n  }\n\n  async submitNewPolygon() {\n    try {\n      if (\n        this.state.editPolygonDetails.name !== '' &&\n        this.state.editPolygonDetails.layer\n      ) {\n        //name validation\n        const existingName = this.state.tableData.rows.find(\n          (item) => item.name === this.state.editPolygonDetails.name\n        );\n        if (existingName) {\n          alert(`Name already exists`);\n          return;\n        }\n\n        const newPolygon = await this.saveGroup(this.state.editPolygonDetails);\n\n        if (newPolygon) {\n          await this.addNewPolygon(newPolygon);\n          this.resetForm();\n          this.disablePolygonEditControl();\n          await this.removeAllPolygonsFromMap();\n        } else {\n          throw new Error(`new polygon not returned`);\n        }\n      } else {\n        alert(`Please input a valid name and shape`);\n      }\n    } catch (err) {\n      console.log(err);\n      alert(`An error occurred while editing`);\n    }\n  }\n\n  async submitEditedPolygon() {\n    try {\n      if (\n        this.state.editPolygonDetails.name !== '' &&\n        this.state.editPolygonDetails.layer\n      ) {\n        //name validation\n        const existingName = this.state.tableData.rows.find(\n          (item) =>\n            item.name === this.state.editPolygonDetails.name &&\n            item._id.toString() !== this.state.editPolygonDetails._id.toString()\n        );\n        if (existingName) {\n          alert(`Name already exists`);\n          return;\n        }\n\n        const newPolygon = await this.updateGroup(\n          this.state.editPolygonDetails\n        );\n\n        if (newPolygon) {\n          await this.addEditedPolygon(newPolygon);\n          this.resetForm();\n          this.disablePolygonEditControl();\n          await this.removeAllPolygonsFromMap();\n        } else {\n          throw new Error('new polygon not returned');\n        }\n      } else {\n        alert(`Please input a valid name and shape`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`An error occurred while editing`);\n    }\n  }\n\n  addNewPolygon(data) {\n    return new Promise((resolve, reject) => {\n      this.setState({\n        tableData: {\n          rows: [\n            ...this.state.tableData.rows,\n            {\n              _id: data._id,\n              name: data.name,\n              layer: data.layer\n                ? data.layer\n                : window.L.GeoJSON.geometryToLayer(data.geoJSON),\n            },\n          ],\n        },\n      });\n      resolve();\n    });\n  }\n\n  addEditedPolygon(data) {\n    return new Promise((resolve, reject) => {\n      const rows = this.state.tableData.rows.map((item) => {\n        if (\n          this.state.editPolygonDetails._id.toString() === item._id.toString()\n        ) {\n          return Object.assign(item, {\n            name: this.state.editPolygonDetails.name,\n            layer: this.state.editPolygonDetails.layer,\n          });\n        } else {\n          return item;\n        }\n      });\n\n      this.setState({\n        tableData: {\n          rows: rows,\n        },\n      });\n      resolve();\n    });\n  }\n\n  cancelNewPolygon() {\n    this.resetForm();\n    this.removeAllPolygonsFromMap();\n    this.disablePolygonEditControl();\n  }\n\n  cancelEditedPolygon() {\n    this.resetForm();\n    this.removeAllPolygonsFromMap();\n    this.disablePolygonEditControl();\n  }\n\n  resetForm() {\n    this.setState({\n      newPolygon: false,\n      editPolygon: false,\n      editPolygonDetails: {\n        name: '',\n        layer: null,\n      },\n    });\n  }\n\n  async run() {\n    await this.onLoad();\n    this.addControls();\n    const groups = await this.getGroups();\n    if (groups && groups.length) {\n      this.populateGroups(groups);\n    }\n  }\n\n  populateGroups(groups) {\n    if (groups && groups.length) {\n      const data = groups\n        .filter((item) => {\n          return item.name && item.geoJSON && item._id;\n        })\n        .map((item) => {\n          item.layer = window.L.GeoJSON.geometryToLayer(item.geoJSON);\n          return item;\n        });\n      this.setState({\n        tableData: {\n          ...this.state.tableData,\n          rows: data,\n        },\n      });\n    }\n  }\n\n  getGroups() {\n    return new Promise((resolve, reject) => {\n      axios\n        .get(url)\n        .then((res) => {\n          if (res && res.data && res.data.data) {\n            resolve(res.data.data);\n          } else {\n            reject(new Error('There is no data'));\n          }\n          resolve();\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  saveGroup(polygonDetails) {\n    return new Promise((resolve, reject) => {\n      if (\n        polygonDetails &&\n        polygonDetails &&\n        polygonDetails.layer &&\n        polygonDetails.name &&\n        polygonDetails.layer.toGeoJSON() &&\n        polygonDetails.layer.toGeoJSON().geometry\n      ) {\n        let group = Object.assign({}, polygonDetails);\n        if (!group.geoJSON) {\n          group.geoJSON = group.layer.toGeoJSON().geometry;\n          delete group.layer;\n        }\n        axios\n          .post(url, group)\n          .then((res) => {\n            if (res && res.data && res.data.data) {\n              resolve(res.data.data);\n            } else {\n              reject(new Error('There is no data'));\n            }\n          })\n          .catch((err) => {\n            reject(err);\n          });\n      } else {\n        reject(new Error(`Insufficient parameters are being sent`));\n      }\n    });\n  }\n\n  updateGroup(polygonDetails) {\n    return new Promise((resolve, reject) => {\n      if (\n        polygonDetails &&\n        polygonDetails &&\n        polygonDetails.layer &&\n        polygonDetails.name &&\n        polygonDetails.layer.toGeoJSON() &&\n        polygonDetails.layer.toGeoJSON().geometry\n      ) {\n        let group = Object.assign({}, polygonDetails);\n        if (!group.geoJSON) {\n          group.geoJSON = group.layer.toGeoJSON().geometry;\n          delete group.layer;\n        }\n        axios\n          .put(url, group)\n          .then((res) => {\n            if (res && res.data && res.data.data) {\n              resolve(res.data.data);\n            } else {\n              reject(new Error('There is no data'));\n            }\n          })\n          .catch((err) => {\n            reject(err);\n          });\n      } else {\n        reject(new Error(`Insufficient parameters are being sent`));\n      }\n    });\n  }\n\n  deleteGroup(group) {\n    return new Promise((resolve, reject) => {\n      axios\n        .delete(url, {\n          data: {\n            _id: group._id,\n          },\n        })\n        .then((res) => {\n          if (res && res.data && res.data.message) {\n            resolve(res.data.message);\n          } else {\n            reject(new Error('There is no data'));\n          }\n          resolve();\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  getLeads() {\n    return new Promise((resolve, reject) => {\n      import('../rawdata/new/leads.json')\n        .then((data) => {\n          if (data && data.default) {\n            const validatedData = data.default.filter((item) => {\n              return (\n                isNumber(item.lat) &&\n                isNumber(item.lng) &&\n                item.StatusDate !== ''\n              );\n            });\n            //sort\n            const sortedData = validatedData.sort((a, b) => {\n              return new Date(a.StatusDate) - new Date(b.StatusDate);\n            });\n            //sanitize\n            const sanitizedData = sortedData.map((item) => {\n              return {\n                ...item,\n                StatusDate: dayjsUtil(item.StatusDate),\n                FirstTimePolicyLiveDate: dayjsUtil(\n                  item.FirstTimePolicyLiveDate\n                ),\n                CreatedDate: dayjsUtil(item.CreatedDate),\n              };\n            });\n            console.log(`render leads ${sanitizedData.length}`);\n            alert(\n              `render leads between ${sanitizedData[0].StatusDate.format(\n                'YYYY-MM-DD'\n              )} and ${sanitizedData[\n                sanitizedData.length - 1\n              ].StatusDate.format('YYYY-MM-DD')}`\n            );\n            resolve(sanitizedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  getGroupToRegions() {\n    return new Promise((resolve, reject) => {\n      import('../rawdata/postcodeWithRegions.json')\n        .then((data) => {\n          if (data && data.default) {\n            const validatedData = data.default.filter((item) => {\n              return item.lat && item.lng;\n            });\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  getE5Engineers() {\n    return new Promise((resolve, reject) => {\n      import('../rawdata/new/engineers.json')\n        .then((data) => {\n          if (data && data.default) {\n            const validatedData = data.default.filter((item) => {\n              return isNumber(item.lat) && isNumber(item.lng);\n            });\n            resolve(validatedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  getBoilerJobs() {\n    return new Promise((resolve, reject) => {\n      import('../rawdata/new/boiler_jobs.json')\n        .then((data) => {\n          if (data && data.default) {\n            const validatedData = data.default.filter((item) => {\n              return (\n                isNumber(item.lat) &&\n                isNumber(item.lng) &&\n                item.AppointmentDate !== ''\n              );\n            });\n            const sanitizedData = validatedData.map((item) => {\n              return {\n                ...item,\n                AppointmentDate: dayjsUtil.tz(\n                  item.AppointmentDate,\n                  'DD/MM/YYYY',\n                  'Europe/London'\n                ),\n              };\n            });\n            const sortedData = sanitizedData.sort((a, b) => {\n              a.AppointmentDate.diff(b.AppointmentDate);\n            });\n            alert(\n              `render boiler jobs between ${sortedData[0].AppointmentDate.format(\n                'YYYY-MM-DD'\n              )} and ${sortedData[sortedData.length - 1].AppointmentDate.format(\n                'YYYY-MM-DD'\n              )}`\n            );\n            resolve(sortedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  getServiceJobs() {\n    return new Promise((resolve, reject) => {\n      import('../rawdata/new/service_jobs.json')\n        .then((data) => {\n          if (data && data.default) {\n            const validatedData = data.default.filter((item) => {\n              return (\n                isNumber(item.lat) &&\n                isNumber(item.lng) &&\n                item.AppointmentDate !== ''\n              );\n            });\n            const sanitizedData = validatedData.map((item) => {\n              return {\n                ...item,\n                AppointmentDate: dayjsUtil.tz(\n                  item.AppointmentDate,\n                  'DD/MM/YYYY',\n                  'Europe/London'\n                ),\n              };\n            });\n            const sortedData = sanitizedData.sort((a, b) => {\n              a.AppointmentDate.diff(b.AppointmentDate);\n            });\n            alert(\n              `render service jobs between ${sortedData[0].AppointmentDate.format(\n                'YYYY-MM-DD'\n              )} and ${sortedData[sortedData.length - 1].AppointmentDate.format(\n                'YYYY-MM-DD'\n              )}`\n            );\n            resolve(sortedData);\n          } else {\n            resolve([]);\n          }\n        })\n        .catch((err) => {\n          reject(err);\n        });\n    });\n  }\n\n  async renderE5Engineers() {\n    const type = 'e5Engineer';\n    try {\n      const arrayContent = await this.getE5Engineers();\n      if (arrayContent && arrayContent.length) {\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            }).addTo(this.mapElement);\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markers.push(marker);\n          }\n        });\n        this.setState({\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderE5EngineerCircles() {\n    const type = 'e5Engineer';\n    try {\n      const arrayContent = await this.getE5Engineers();\n      if (arrayContent && arrayContent.length) {\n        let circles = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            let circle = window.L.circle([item.lat, item.lng], 40233.6).addTo(\n              this.mapElement\n            );\n            circles.push(circle);\n          }\n        });\n        this.setState({\n          [`${type}Circle`]: circles,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderBoilerJobs() {\n    const type = 'boilerJob';\n    try {\n      const arrayContent = await this.getBoilerJobs();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderServiceJobs() {\n    const type = 'serviceJob';\n    try {\n      const arrayContent = await this.getServiceJobs();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderLeads() {\n    const type = 'lead';\n    try {\n      const arrayContent = await this.getLeads();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.lat && item.lng) {\n            const marker = window.L.marker([item.lat, item.lng], {\n              icon: this.markerIcon(type),\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  getAssociates() {\n    return associateService.getAllAssociates();\n  }\n\n  async renderAssociates() {\n    const type = 'associate';\n    try {\n      this.removeAssociates();\n      const arrayContent = await this.getAssociates();\n      if (arrayContent && arrayContent.length) {\n        let markerLayer = window.L.markerClusterGroup();\n        let markers = [];\n        arrayContent.forEach((item) => {\n          if (item.latitude && item.longitude) {\n            const marker = window.L.marker([item.latitude, item.longitude], {\n              icon: this.markerIcon(type, item.engineStatus, [30, 30]),\n              rotationAngle: item.heading,\n            }).bindLabel(item.name, {\n              noHide: !this.state.hideAssociateLabels,\n            });\n            marker.bindPopup(this.markerPopupContent(type, item));\n            markerLayer.addLayer(marker);\n            markers.push(marker);\n          }\n        });\n        markerLayer.addTo(this.mapElement);\n        this.setState({\n          [`${type}Cluster`]: markerLayer,\n          [type]: markers,\n        });\n      } else {\n        throw new Error(`No ${type} to be rendered`);\n      }\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderServiceJobsHeatMap() {\n    const type = 'serviceJob';\n    const arrayContent = await this.getServiceJobs();\n    const addressPoints = arrayContent.map(function (p) {\n      return [p.lat, p.lng, 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1,\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat,\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderLeadsHeatMap() {\n    const type = 'lead';\n    const arrayContent = await this.getLeads();\n    const addressPoints = arrayContent.map(function (p) {\n      return [p.lat, p.lng, 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1,\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat,\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  async renderBoilerJobsHeatMap() {\n    const type = 'boilerJob';\n    const arrayContent = await this.getBoilerJobs();\n    const addressPoints = arrayContent.map(function (p) {\n      return [p.lat, p.lng, 0.5];\n    });\n    const heat = window.L.heatLayer(addressPoints, {\n      radius: 10,\n      minOpacity: 1,\n    }).addTo(this.mapElement);\n    this.setState({\n      [`${type}sHeatMap`]: heat,\n    });\n    try {\n    } catch (err) {\n      console.error(err);\n      alert(`Error while rendering ${type}`);\n    }\n  }\n\n  markerPopupContent(type, item) {\n    let content = '';\n    let tableContent = '';\n    Object.keys(item).forEach((k) => {\n      tableContent =\n        tableContent +\n        `\n      <tr>\n      <td class=\"popup-table-row\">\n      <td>${k}</td>\n      <td>${item[k]}</td>\n      </td>\n        </tr>\n        `;\n    });\n    if (tableContent) {\n      content = `\n      <table class=\"table table-dark\">\n      ${tableContent}\n      </table>\n      `;\n    }\n    return content;\n  }\n\n  /**\n   *\n   * @param {string} type\n   * @param {string} [status]\n   * @returns\n   */\n  markerIcon(type, status, size) {\n    //   \"https://res.cloudinary.com/razrlab/image/upload/c_scale,co_rgb:D12711,e_colorize:100,f_png/v1541359481/pin_t5dc4n.png\",\n    let icon = '';\n    switch (type) {\n      case 'associate':\n        icon = '/icons/vehicle_off.png';\n        if (status === 'on') {\n          icon = '/icons/vehicle_on.png';\n        } else if (status === 'off') {\n          icon = '/icons/vehicle_off.png';\n        }\n        break;\n      case 'e5Engineer':\n        icon = '/icons/person.png';\n        break;\n      case 'serviceJob':\n        icon = '/icons/service.png';\n        break;\n      case 'lead':\n        icon = '/icons/homes.png';\n        break;\n      case 'boilerJob':\n        icon = '/icons/breakdown.png';\n        break;\n      default:\n        //nothing\n        break;\n    }\n    const iconElement = window.L.icon({\n      iconUrl: icon,\n      iconSize: size ?? [25, 25],\n      iconAnchor: [12, 25],\n      popupAnchor: [3, -40],\n    });\n\n    return iconElement;\n  }\n\n  removeMarkers() {\n    return new Promise((resolve, reject) => {\n      this.removeE5Engineers();\n      resolve();\n    });\n  }\n\n  removeE5EngineerCircles() {\n    let circles = this.state.e5EngineerCircle;\n    if (circles && circles.length) {\n      circles.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n\n  removeAssociates() {\n    let associateMarkers = this.state.associate;\n    if (associateMarkers && associateMarkers.length) {\n      associateMarkers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n  removeE5Engineers() {\n    let e5EngineerMarkers = this.state.e5Engineer;\n    if (e5EngineerMarkers && e5EngineerMarkers.length) {\n      e5EngineerMarkers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n    }\n  }\n\n  removeServiceJobs() {\n    let markers = this.state.serviceJob;\n    let clusters = this.state.serviceJobCluster;\n    if (markers && markers.length) {\n      markers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeLeads() {\n    let markers = this.state.lead;\n    let clusters = this.state.leadCluster;\n    if (markers && markers.length) {\n      markers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeBoilerJobs() {\n    let markers = this.state.boilerJob;\n    let clusters = this.state.boilerJobCluster;\n    if (markers && markers.length) {\n      markers.forEach((item) => {\n        this.mapElement.removeLayer(item);\n      });\n      clusters && this.mapElement.removeLayer(clusters);\n    }\n  }\n\n  removeServiceJobsHeatMap() {\n    const layer = this.state.serviceJobsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n\n  removeLeadsHeatMap() {\n    const layer = this.state.leadsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n\n  removeBoilerJobsHeatMap() {\n    const layer = this.state.boilerJobsHeatMap;\n    layer && this.mapElement.removeLayer(layer);\n  }\n  addControls() {\n    const L = window.L;\n    L.control\n      .custom({\n        position: 'bottomleft',\n        content: `\n        <div class=\"panel-body\">\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"e5Engineers\">E5 Engineers</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"e5EngineerCircles\">E5 Engineers Boundaries</label>\n          </div>\n          <div class=\"checkbox\">\n          <label><input type=\"checkbox\" value=\"leadsHeatMap\">Leads Heat Map</label>\n          </div>\n          <div class=\"checkbox\">\n          <label><input type=\"checkbox\" value=\"serviceJobsHeatMap\">Service Jobs Heat Map</label>\n          </div>\n          <div class=\"checkbox\">\n          <label><input type=\"checkbox\" value=\"boilerJobsHeatMap\">Boiler Jobs Heat Map</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"leads\">Leads</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"serviceJobs\">Service Jobs</label>\n          </div>\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"boilerJobs\">Boiler Jobs</label>\n          </div>\n          <hr />\n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"geofenceControls\">Polygon Controls</label>\n          </div>  \n          <div class=\"checkbox\">\n            <label><input type=\"checkbox\" value=\"fixedDriverLabels\">Fixed Driver Labels</label>\n          </div>  \n        </div>\n        `,\n        classes: 'panel panel-default',\n        style: {},\n        events: {\n          click: (data) => {\n            if (data && data.srcElement && data.srcElement.type) {\n              switch (data.srcElement.value) {\n                case 'leads':\n                  data.srcElement.checked\n                    ? this.renderLeads()\n                    : this.removeLeads();\n                  break;\n                case 'leadsHeatMap':\n                  data.srcElement.checked\n                    ? this.renderLeadsHeatMap()\n                    : this.removeLeadsHeatMap();\n                  break;\n                case 'e5Engineers':\n                  data.srcElement.checked\n                    ? this.renderE5Engineers()\n                    : this.removeE5Engineers();\n                  break;\n                case 'e5EngineerCircles':\n                  data.srcElement.checked\n                    ? this.renderE5EngineerCircles()\n                    : this.removeE5EngineerCircles();\n                  break;\n                case 'serviceJobs':\n                  data.srcElement.checked\n                    ? this.renderServiceJobs()\n                    : this.removeServiceJobs();\n                  break;\n                case 'serviceJobsHeatMap':\n                  data.srcElement.checked\n                    ? this.renderServiceJobsHeatMap()\n                    : this.removeServiceJobsHeatMap();\n                  break;\n                case 'boilerJobs':\n                  data.srcElement.checked\n                    ? this.renderBoilerJobs()\n                    : this.removeBoilerJobs();\n                  break;\n                case 'boilerJobsHeatMap':\n                  data.srcElement.checked\n                    ? this.renderBoilerJobsHeatMap()\n                    : this.removeBoilerJobsHeatMap();\n                  break;\n                case 'geofenceControls':\n                  data.srcElement.checked\n                    ? this.showSideBar()\n                    : this.hideSideBar();\n                  break;\n                case 'fixedDriverLabels':\n                  this.setState({\n                    hideAssociateLabels: !data.srcElement.checked,\n                  });\n                  this.renderAssociates();\n                  break;\n                default:\n                  break;\n              }\n            }\n          },\n        },\n      })\n      .addTo(this.mapElement);\n  }\n\n  initEditableLayer() {\n    this.editableLayers = new window.L.FeatureGroup();\n    this.mapElement.addLayer(this.editableLayers);\n  }\n\n  initDrawControls() {\n    let drawPluginOptions = {\n      position: 'topright',\n      draw: {\n        polygon: {\n          allowIntersection: false, // Restricts shapes to simple polygons\n          drawError: {\n            color: '#e1e100', // Color the shape will turn when intersects\n            message: \"<strong>Oh snap!<strong> you can't draw that!\", // Message that will show when intersect\n          },\n          shapeOptions: {\n            color: '#97009c',\n          },\n        },\n        // disable toolbar item by setting it to false\n        polyline: false,\n        circle: false, // Turns off this drawing tool\n        rectangle: false,\n        marker: false,\n      },\n      edit: {\n        featureGroup: this.editableLayers, //REQUIRED!!\n        remove: false,\n      },\n    };\n    this.drawControl = new window.L.Control.Draw(drawPluginOptions);\n  }\n\n  enablePolygonEditControl() {\n    const map = this.mapElement;\n\n    map.on('draw:created', (e) => {\n      console.log('draw:created');\n      const layer = e.layer;\n\n      this.setState({\n        editPolygonDetails: {\n          ...this.state.editPolygonDetails,\n          layer: layer,\n        },\n        currentPolygonsInView: [layer],\n      });\n\n      this.editableLayers.addLayer(layer);\n    });\n\n    map.on('draw:edited', (e) => {\n      console.log('draw:edited');\n      const layers = e.layers;\n      layers.eachLayer((layer) => {\n        this.setState({\n          editPolygonDetails: {\n            ...this.state.editPolygonDetails,\n            layer: layer,\n          },\n          currentPolygonsInView: [layer],\n        });\n      });\n    });\n\n    map.addControl(this.drawControl);\n  }\n\n  disablePolygonEditControl() {\n    if (this.drawControl) {\n      this.mapElement.removeControl(this.drawControl);\n    }\n  }\n\n  onLoad() {\n    return new Promise((resolve, reject) => {\n      const L = window.L;\n      const $ = window.$;\n      const config = window.config;\n      const loading = L.control({ position: 'bottomright' }),\n        loaded = {\n          areas: false,\n          districts: false,\n          sectors: false,\n        },\n        geoJsonLayerOptions = {\n          style: config.shapeStyle,\n          onEachFeature: onEachFeature,\n        },\n        layerAreas = L.geoJson(null, geoJsonLayerOptions),\n        layerDistricts = L.geoJson(null, geoJsonLayerOptions),\n        layerSectors = L.geoJson(null, geoJsonLayerOptions),\n        layerGoogle = L.tileLayer(\n          'http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}?key=AIzaSyC0AJcO-U5RksjP02AQHxEuFlEW5xSKzp8',\n          {\n            maxZoom: 20,\n            subdomains: ['mt0', 'mt1', 'mt2', 'mt3'],\n          }\n        ),\n        layerOSM = L.tileLayer(config.openStreetMap.url, {\n          // OpenStreetMap tile layer (default)\n          attribution: config.openStreetMap.attribution,\n          maxZoom: config.zoom.max,\n        }),\n        tileMaps = {\n          // Tile map layer switcher\n          'Google Maps': layerGoogle,\n          RAZRMAPS: layerOSM,\n        },\n        overlayMaps = {\n          // GeoJSON layer switcher\n          Areas: layerAreas,\n          Districts: layerDistricts,\n          Sectors: layerSectors,\n        },\n        map = L.map('map', {\n          // Setup map object\n          center: [53.21919, -1.86768],\n          zoom: 7,\n          layers: [layerOSM],\n        });\n\n      const sidebar = L.control.sidebar('sidebar', {\n        closeButton: true,\n        position: 'left',\n      });\n      map.addControl(sidebar);\n\n      //expose some elements\n      this.sidebarElement = sidebar;\n      this.mapElement = map;\n\n      // Add layers control\n      L.control.layers(tileMaps, overlayMaps, { collapsed: false }).addTo(map);\n\n      this.initEditableLayer();\n      this.initDrawControls();\n\n      // For each feature, set random fill colour and bind 'name' label\n      function onEachFeature(feature, layer) {\n        layer.setStyle({ fillColor: randomColor() });\n        layer.bindLabel(feature.properties.name, { noHide: true });\n      }\n\n      function randomRange(min, max) {\n        return Math.floor(Math.random() * (max - min)) + min;\n      }\n\n      function randomColor() {\n        return (\n          'rgb(' +\n          randomRange(0, 256) +\n          ',' +\n          randomRange(0, 256) +\n          ',' +\n          randomRange(0, 256) +\n          ')'\n        );\n      }\n\n      // Setup GeoJSON loading indicator and add to map\n      loading.onAdd = function () {\n        const div = L.DomUtil.create('div', 'control loader');\n\n        div.innerHTML = `\n              <div>\\\n                  Areas... <span id=\"loadAreas\">&#x21BB;</span><br>\n                  Districts... <span id=\"loadDistricts\">&#x21BB;</span><br>\n                  Sectors... <span id=\"loadSectors\">&#x21BB;</span>\n              </div>\n              `;\n\n        return div;\n      };\n      loading.addTo(map);\n\n      // Automatically set the GeoJSON layer depending on zoom level\n      // map.on(\"zoomend\", function() {\n      //   if (!(loaded.areas && loaded.districts && loaded.sectors)) {\n      //     return;\n      //   }\n\n      //   const zoom = map.getZoom();\n\n      //   if (\n      //     zoom >= config.zoom.areas &&\n      //     zoom < config.zoom.districts &&\n      //     !map.hasLayer(layerAreas)\n      //   ) {\n      //     map.removeLayer(layerDistricts);\n      //     map.removeLayer(layerSectors);\n      //     map.addLayer(layerAreas);\n      //   } else if (\n      //     zoom >= config.zoom.districts &&\n      //     zoom < config.zoom.sectors &&\n      //     !map.hasLayer(layerDistricts)\n      //   ) {\n      //     map.removeLayer(layerAreas);\n      //     map.removeLayer(layerSectors);\n      //     map.addLayer(layerDistricts);\n      //   } else if (zoom >= config.zoom.sectors && !map.hasLayer(layerSectors)) {\n      //     map.removeLayer(layerAreas);\n      //     map.removeLayer(layerDistricts);\n      //     map.addLayer(layerSectors);\n      //   }\n      // });\n\n      // Load postcode Areas GeoJSON file\n      $.getJSON(config.files.areas, function (data) {\n        // Add loaded GeoJSON data to layer\n        layerAreas.addData(data.features);\n\n        // Show Areas layer by default\n        map.addLayer(layerAreas);\n\n        loaded.areas = true;\n        $('#loadAreas').html('&#x2713;');\n      }).error(function (error) {\n        console.error(\n          \"Failed loading '\" + config.files.areas + \"'\",\n          'Error: ' + error.statusText\n        );\n\n        $('#loadAreas').html('&#x2717;');\n      });\n\n      // Load postcode Districts GeoJSON file\n      $.getJSON(config.files.districts, function (data) {\n        // Add loaded GeoJSON data to layer\n        layerDistricts.addData(data.features);\n\n        loaded.districts = true;\n        $('#loadDistricts').html('&#x2713;');\n      }).error(function (error) {\n        console.error(\n          \"Failed loading '\" + config.files.districts + \"'\",\n          'Error: ' + error.statusText\n        );\n\n        $('#loadDistricts').html('&#x2717;');\n      });\n\n      // Load postcode Sectors GeoJSON file\n      $.getJSON(config.files.sectors, function (data) {\n        // Add loaded GeoJSON data to layer\n        layerSectors.addData(data.features);\n\n        loaded.sectors = true;\n        $('#loadSectors').html('&#x2713;');\n      }).error(function (error) {\n        console.error(\n          \"Failed loading '\" + config.files.sectors + \"'\",\n          'Error: ' + error.statusText\n        );\n\n        $('#loadSectors').html('&#x2717;');\n      });\n      this.renderAssociates();\n      this.associateRefresher = setInterval(() => {\n        void this.renderAssociates();\n      }, 45 * 1000);\n      resolve();\n    });\n  }\n\n  showSideBar() {\n    this.sidebarElement.show();\n  }\n\n  hideSideBar() {\n    this.sidebarElement.hide();\n  }\n}\n\nexport { Map };\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nimport { userService } from \"../_services\";\n\nimport { Map } from \"../_components\";\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      user: {},\n      users: []\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      user: JSON.parse(localStorage.getItem(\"user\")),\n      users: { loading: true }\n    });\n    userService.getAll().then(users => this.setState({ users }));\n  }\n\n  render() {\n    const { user, users } = this.state;\n    return <Map />;\n  }\n}\n\nexport { HomePage };\n","import React from \"react\";\n\nimport { userService } from \"../_services\";\n\nimport \"./LoginPage.css\";\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    userService.logout();\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      submitted: false,\n      loading: false,\n      error: \"\"\n    };\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(e) {\n    const { name, value } = e.target;\n    this.setState({ [name]: value });\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n\n    this.setState({ submitted: true });\n    const { username, password, returnUrl } = this.state;\n\n    // stop here if form is invalid\n    if (!(username && password)) {\n      return;\n    }\n\n    this.setState({ loading: true });\n    userService.login(username, password).then(\n      user => {\n        const { from } = this.props.location.state || {\n          from: { pathname: \"/\" }\n        };\n        this.props.history.push(from);\n      },\n      error => this.setState({ error, loading: false })\n    );\n  }\n\n  render() {\n    const { username, password, submitted, loading, error } = this.state;\n\n    // return (\n    //   <div className=\"login-page\">\n    //     <div className=\"form\">\n    //       <form className=\"register-form\" onSubmit={this.handleSubmit}>\n    //         <input\n    //           type=\"text\"\n    //           className=\"form-control\"\n    //           name=\"username\"\n    //           value={username}\n    //           onChange={this.handleChange}\n    //         />\n    //         <input\n    //           type=\"password\"\n    //           className=\"form-control\"\n    //           name=\"password\"\n    //           value={password}\n    //           onChange={this.handleChange}\n    //         />\n    //       </form>\n    //       <form className=\"login-form\">\n    //         <input type=\"text\" placeholder=\"username\" />\n    //         <input type=\"password\" placeholder=\"password\" />\n    //         <div className=\"form-group\">\n    //           <button className=\"btn btn-primary\" disabled={loading}>\n    //             Login\n    //           </button>\n    //           {loading && (\n    //             <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n    //           )}\n    //         </div>\n    //         {error && <div className={\"alert alert-danger\"}>{error}</div>}\n    //         <p className=\"message\">\n    //           This is a private page. If you're not supposed to be here, walk\n    //           away now!\n    //         </p>\n    //       </form>\n    //     </div>\n    //   </div>\n    // );\n\n    return (\n      <div className=\"login-page\">\n        <div className=\"form\">\n          <h2>Map Analyzer</h2>\n          <form name=\"form\" onSubmit={this.handleSubmit}>\n            <div\n              className={\n                \"form-group\" + (submitted && !username ? \" has-error\" : \"\")\n              }\n            >\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                name=\"username\"\n                value={username}\n                onChange={this.handleChange}\n                placeholder=\"Username\"\n              />\n              {submitted && !username && (\n                <div className=\"help-block\">Username is required</div>\n              )}\n            </div>\n            <div\n              className={\n                \"form-group\" + (submitted && !password ? \" has-error\" : \"\")\n              }\n            >\n              <input\n                type=\"password\"\n                className=\"form-control\"\n                name=\"password\"\n                value={password}\n                onChange={this.handleChange}\n                placeholder=\"Password\"\n              />\n              {submitted && !password && (\n                <div className=\"help-block\">Password is required</div>\n              )}\n            </div>\n            <div className=\"form-group\">\n              <button className=\"btn btn-primary\" disabled={loading}>\n                Login\n              </button>\n              {loading && (\n                <img src=\"data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==\" />\n              )}\n            </div>\n            {error && <div className={\"alert alert-danger\"}>{error}</div>}\n          </form>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport { LoginPage };\n","import React from \"react\";\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nimport { PrivateRoute } from \"../_components\";\nimport { HomePage } from \"../HomePage\";\nimport { LoginPage } from \"../LoginPage\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      // <div className=\"jumbotron\">\n      //     <div className=\"container\">\n      //         <div className=\"col-sm-8 col-sm-offset-2\">\n      <Router>\n        <div>\n          <PrivateRoute exact path=\"/\" component={HomePage} />\n          <Route path=\"/login\" component={LoginPage} />\n        </div>\n      </Router>\n      //         </div>\n      //     </div>\n      // </div>\n    );\n  }\n}\n\nexport { App };\n","export function configureFakeBackend() {\n    let users = [{ id: 1, username: 'vp', password: 'vptester', firstName: 'Test', lastName: 'User' }];\n    let realFetch = window.fetch;\n    window.fetch = function (url, opts) {\n        return new Promise((resolve, reject) => {\n            // wrap in timeout to simulate server api call\n            setTimeout(() => {\n\n                // authenticate\n                if (url.endsWith('/users/authenticate') && opts.method === 'POST') {\n                    // get parameters from post request\n                    let params = JSON.parse(opts.body);\n\n                    // find if any user matches login credentials\n                    let filteredUsers = users.filter(user => {\n                        return user.username === params.username && user.password === params.password;\n                    });\n\n                    if (filteredUsers.length) {\n                        // if login details are valid return user details\n                        let user = filteredUsers[0];\n                        let responseJson = {\n                            id: user.id,\n                            username: user.username,\n                            firstName: user.firstName,\n                            lastName: user.lastName\n                        };\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(responseJson)) });\n                    } else {\n                        // else return error\n                        reject('Username or password is incorrect');\n                    }\n\n                    return;\n                }\n\n                // get users\n                if (url.endsWith('/users') && opts.method === 'GET') {\n                    // check for fake auth token in header and return users if valid, this security \n                    // is implemented server side in a real application\n                    if (opts.headers && opts.headers.Authorization === `Basic ${window.btoa('vp:vptester')}`) {\n                        resolve({ ok: true, text: () => Promise.resolve(JSON.stringify(users)) });\n                    } else {\n                        // return 401 not authorised if token is null or invalid\n                        resolve({ status: 401, text: () => Promise.resolve() });\n                    }\n\n                    return;\n                }\n\n                // pass through any requests not handled above\n                realFetch(url, opts).then(response => resolve(response));\n\n            }, 500);\n        });\n    }\n}","import React from 'react';\nimport { render } from 'react-dom';\n\nimport { App } from './App';\n\n// setup fake backend\nimport { configureFakeBackend } from './_helpers';\n\nconfigureFakeBackend();\nrender(<App />, document.getElementById('root'));\n"],"sourceRoot":""}